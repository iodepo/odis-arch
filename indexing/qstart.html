
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Indexing with Gleaner &#8212; The Ocean InfoHub Project and ODIS</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'indexing/qstart';</script>
    <link rel="icon" href="../_static/ODIS-logo-32x32.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Gleaner CLI Docker" href="cliDocker/index.html" />
    <link rel="prev" title="Aggregator" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/ODIS-logo-192x192.png" class="logo__image only-light" alt="The Ocean InfoHub Project and ODIS - Home"/>
    <img src="../_static/ODIS-logo-192x192.png" class="logo__image only-dark pst-js-only" alt="The Ocean InfoHub Project and ODIS - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    The Ocean InfoHub Project & ODIS
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../content.html">Structured Data on the Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="../personas/persona.html">Personas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publishing/publishing.html">Publisher</a></li>
<li class="toctree-l1"><a class="reference internal" href="../foundation/foundation.html">JSON-LD Foundation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../gettingStarted.html">Connecting to the ODIS Federation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Profiles</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../thematics/index.html">Thematic Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thematics/expinst/index.html">Core 1: Experts and Institutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thematics/docs/index.html">Core 2a: Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thematics/dataset/index.html">Core 2b: Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thematics/docs/maps.html">Core 3: Spatial Maps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thematics/projects/index.html">Core 4: Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thematics/training/index.html">Core 5: Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thematics/vessels/index.html">Core 6: Vessels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thematics/spatial/index.html">Support 1: Spatial Geometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thematics/services/index.html">Support 2: Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thematics/terms/list.html">Support 3: Keywords &amp; Defined Terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thematics/languages/languages.html">Support 4: Languages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thematics/sdg/index.html">Support 5: Linking To Principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thematics/identifier/id.html">Support 6: Identifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thematics/variables/index.html">Support 7: EOVs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thematics/license/index.html">Support 8: Licenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thematics/depth/index.html">Support 9: Depth</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Aggregation</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="index.html">Aggregator</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Indexing with Gleaner</a></li>
<li class="toctree-l1"><a class="reference internal" href="cliDocker/index.html">Gleaner CLI Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="indexingservices.html">Indexing Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataservices.html">Data Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="graphpub.html">Graph First Approach</a></li>
<li class="toctree-l1"><a class="reference internal" href="prov/index.html">Indexing Activity Prov</a></li>
<li class="toctree-l1"><a class="reference internal" href="alternatives.html">Alternatives</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tooling</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../tooling/index.html">Tooling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tooling/ckan.html">Installing a CKAN Catalogue and connecting to ODIS</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Validation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../validation/index.html">Validation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Interfaces</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../users/index.html">Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users/query.html">SPARQL</a></li>












<li class="toctree-l1"><a class="reference internal" href="../users/sparql.html">OIH SPARQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users/apis.html">APIs</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../appendix/index.html">Appendix</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../appendix/annoyances.html">Known Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/references.html">References</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/registries.html">Registries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/vocabularies.html">Controlled Vocabularies</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/iodepo/odis-arch" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/iodepo/odis-arch/issues/new?title=Issue%20on%20page%20%2Findexing/qstart.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/indexing/qstart.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Indexing with Gleaner</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gleaner-app">Gleaner (app)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#quick-start-steps">Quick Start steps</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#grab-gleaner-and-the-support-files-we-need">Grab Gleaner and the support files we need</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#about-the-compose-file-s">About the compose file(s)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#edit-environment-variables-setup-script">Edit environment variables setup script</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#spin-up-the-containers">Spin up the containers</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#edit-gleaner-config-file">Edit Gleaner config file</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#object-store">Object store</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#gleaner">Gleaner</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#context-sections">Context sections</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#summoner-section">Summoner section</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#millers-section">Millers section</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#site-graphs-section">Site graphs section</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#sources-section">Sources section</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#run-gleaner">Run gleaner</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#load-results-to-a-graph-and-test">Load results to a graph and test</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#minio-object-store">Minio Object store</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#load-triplestore">Load Triplestore</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="indexing-with-gleaner">
<h1>Indexing with Gleaner<a class="headerlink" href="#indexing-with-gleaner" title="Link to this heading">#</a></h1>
<p><img alt="compose options" src="../_images/composeOptions.png" /></p>
<section id="gleaner-app">
<h2>Gleaner (app)<a class="headerlink" href="#gleaner-app" title="Link to this heading">#</a></h2>
<p>The Gleaner applications performs the retrieval and loading of JSON-LD documents
from the web following structured data on the web patterns.  Gleaner is available for Linux, Mac OS X and Windows.</p>
<p>While Gleaner is a stand alone app, it needs to interact with
an object store to support data storage and other operations.  These dependencies are met within the
Gleaner Indexing Services or Data Service Docker compose files.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This documentation is in development.  The primary testing environments are Linux and other UNIX based platforms
such as Mac OS X.   If you are on Windows, there may be some issues.  If you can use a Linux subsystem on Windows,
you may experience better results.  We will test with Windows eventually and update documentation as needed.</p>
</div>
<section id="quick-start-steps">
<h3>Quick Start steps<a class="headerlink" href="#quick-start-steps" title="Link to this heading">#</a></h3>
<p>This quick start guide is focused on setting up and testing Gleaner in a local environnement.  It is similar to
how you might run Gleaner in a production environment but lacks the routing and other features likely desired for
such a situation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This documentation assumes a basic understanding of Docker and experience with basic Docker activities like
starting and stopping containers.  It also assumes an understanding of using a command line interface and
editing configuration files in the YAML format.</p>
</div>
<div class="tip admonition">
<p class="admonition-title">Command</p>
<p>From this point down, the documentation will attempt to put all commands
you should issue in this admonition style box.</p>
</div>
<p>In the end, this is the table of applications and config files you will need.  In this guide we will go through
downloading, setting them up and running Gleaner to index documents from the web.</p>
<div class="pst-scrollable-table-container"><table class="table" id="id1">
<caption><span class="caption-number">Table 1 </span><span class="caption-text">Required Applications and Their Config Files</span><a class="headerlink" href="#id1" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Gleaner</p></th>
<th class="head"><p>Docker</p></th>
<th class="head"><p>Minio Client</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>config.yaml</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">setenv.sh</span> </code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">load2blaze.sh</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>schemaorg-current-https.jsonld</p></td>
<td><p>gleaner-DS-NoRouter.yml</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<section id="grab-gleaner-and-the-support-files-we-need">
<h4>Grab Gleaner and the support files we need<a class="headerlink" href="#grab-gleaner-and-the-support-files-we-need" title="Link to this heading">#</a></h4>
<p>We will need to get the Gleaner binary for your platform and also the Gleaner configuration file
template.  To do this, visit the <a class="reference external" href="https://github.com/earthcubearchitecture-project418/gleaner/releases">Gleaner Releases page </a>
and pick the release <em>Ocean InfoHubdev rc1</em>.  Under the <em>Assets</em> drop down you should see the files we need.  Get:</p>
<ul class="simple">
<li><p>Gleaner for your platform</p></li>
<li><p>Gleaner config template: template_v2.0.yaml</p></li>
<li><p>Gleaner indexing service compose file: gleaner-IS.yml</p></li>
<li><p>Helper environment setup script: <a class="reference external" href="http://setenvIS.sh">setenvIS.sh</a></p></li>
</ul>
<p>For this demonstration, we will be running on linux, so this would look something like:</p>
<div class="tip admonition">
<p class="admonition-title">Command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-L<span class="w"> </span>-O<span class="w"> </span>https://github.com/earthcubearchitecture-project418/gleaner/releases/download/2.0.25/gleaner
curl<span class="w"> </span>-L<span class="w"> </span>-O<span class="w"> </span>https://github.com/earthcubearchitecture-project418/gleaner/releases/download/2.0.25/gleaner-IS.yml
curl<span class="w"> </span>-L<span class="w"> </span>-O<span class="w"> </span>https://github.com/earthcubearchitecture-project418/gleaner/releases/download/2.0.25/setenvIS.sh
curl<span class="w"> </span>-L<span class="w"> </span>-O<span class="w"> </span>https://github.com/earthcubearchitecture-project418/gleaner/releases/download/2.0.25/template_v2.0.yaml
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can download these with any tool you wish or through the browser.  Above we downloaded used the command
line curl tool.  For GitHub, be sure to add the -L to inform curl to follow redirects to the object to download.</p>
</div>
<div class="tip admonition">
<p class="admonition-title">Command</p>
<p>You may need to change the permission on your gleaner file to ensure it can be run.   On Linux this would
look something like the following.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>chmod<span class="w"> </span><span class="m">755</span><span class="w"> </span>gleaner
</pre></div>
</div>
</div>
<p>We then need to visit <a class="reference external" href="https://schema.org/docs/developers.html">Schema.org for Developers</a> to pull down the
appropriate JSON-LD context.  For this work we will want to pull down the <em>schemaorg-current-https</em> in JSON-LD format.<br />
It also should work to do something similar to the following:</p>
<div class="tip admonition">
<p class="admonition-title">Command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-O<span class="w"> </span>https://schema.org/version/latest/schemaorg-current-https.jsonld
</pre></div>
</div>
</div>
</section>
<section id="about-the-compose-file-s">
<h4>About the compose file(s)<a class="headerlink" href="#about-the-compose-file-s" title="Link to this heading">#</a></h4>
<p>The above steps have collected the resources for the indexer.   We now want to set up the services that
Gleaner will use to perform the indexing.  To do that we use Docker or an appropriate run time alternative like
Podman or others.   For this example, we will assume you are using the Docker client.</p>
<p>As noted, a basic understanding of Docker and the ability to issue Docker cli commands to start and stop
containers is required. If you are new do Docker, we recommend you visit and read:
<a class="reference external" href="https://www.docker.com/get-started">Get Started with Docker</a>.</p>
<p>We need to select the type of services we wish to run.  The various versions of these Docker compose
file can be found in the <a class="reference external" href="https://github.com/gleanerio/gleaner-compose/tree/master/deployment">Gleaner-compose deployment directory</a>.</p>
<p>Why pick one over the other?</p>
<blockquote>
<div><p>Choose Gleaner IS if you simply wish to retrieve the JSON-LD into a data warehouse to use in your own workflows</p>
</div></blockquote>
<blockquote>
<div><p>Choose Gleaner DS if you wish to build out a graph and want to use the default contains used by Gleaner.</p>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We wont look at this file in detail here since there will hopefully be no
required edits.  You can see the file in detail in the Index Services
section.</p>
</div>
</section>
<section id="edit-environment-variables-setup-script">
<h4>Edit environment variables setup script<a class="headerlink" href="#edit-environment-variables-setup-script" title="Link to this heading">#</a></h4>
<p>We have Docker and the appropriate compose file.  The compose files require a set of environment variables
to be populated to provide the local hosts information needed to run.  You can set these yourself or
use or reference the <a class="reference external" href="http://setenv.sh">setenv.sh</a> file in the Gleaner-compose repository in the<br />
<a class="reference external" href="https://github.com/gleanerio/gleaner-compose/tree/master/deployment">Gleaner-compose deployment directory</a>.
You may also need to visit information about permissions at
<a class="reference external" href="https://docs.docker.com/engine/install/linux-postinstall/">Post-installation steps for Linux</a> if you are
having permission issues.</p>
<p>Let’s take a look at the script.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>#!/bin/bash
<span class="linenos"> 2</span>
<span class="linenos"> 3</span># Object store keys
<span class="linenos"> 4</span>export MINIO_ACCESS_KEY=worldsbestaccesskey
<span class="linenos"> 5</span>export MINIO_SECRET_KEY=worldsbestsecretkey
<span class="linenos"> 6</span>
<span class="linenos"> 7</span># local data volumes
<span class="linenos"> 8</span>export GLEANER_BASE=/tmp/gleaner/
<span class="linenos"> 9</span>mkdir -p ${GLEANER_BASE}
<span class="linenos">10</span>export GLEANER_OBJECTS=${GLEANER_BASE}/datavol/s3
<span class="linenos">11</span>export GLEANER_GRAPH=${GLEANER_BASE}/datavol/graph
</pre></div>
</div>
<p>You may wish to edit file to work better with your environment.  By default it will attempt to
use localhost to resolve with and host local runtime data in a /tmp/gleaner directory.</p>
</section>
<section id="spin-up-the-containers">
<h4>Spin up the containers<a class="headerlink" href="#spin-up-the-containers" title="Link to this heading">#</a></h4>
<p>Load our environment variables to the shell:</p>
<div class="tip admonition">
<p class="admonition-title">Command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>setenv.sh
</pre></div>
</div>
</div>
<p>Then start the containers:</p>
<div class="tip admonition">
<p class="admonition-title">Command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker-compose<span class="w"> </span>-f<span class="w"> </span>gleaner-IS.yml<span class="w"> </span>up<span class="w"> </span>-d
</pre></div>
</div>
</div>
<p>If all has gone well, you should be able to see your running containers with</p>
<div class="tip admonition">
<p class="admonition-title">Command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>ps
</pre></div>
</div>
</div>
<p>and see results similar to:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>CONTAINER<span class="w"> </span>ID<span class="w">        </span>IMAGE<span class="w">                            </span>COMMAND<span class="w">                  </span>CREATED<span class="w">             </span>STATUS<span class="w">              </span>PORTS<span class="w">                    </span>NAMES
c4b7097f5e06<span class="w">        </span>nawer/blazegraph<span class="w">                 </span><span class="s2">&quot;docker-entrypoint.s…&quot;</span><span class="w">   </span><span class="m">8</span><span class="w"> </span>seconds<span class="w"> </span>ago<span class="w">       </span>Up<span class="w"> </span><span class="m">7</span><span class="w"> </span>seconds<span class="w">        </span><span class="m">0</span>.0.0.0:9999-&gt;9999/tcp<span class="w">   </span>test_triplestore_1
ca08c24963a0<span class="w">        </span>minio/minio:latest<span class="w">               </span><span class="s2">&quot;/usr/bin/docker-ent…&quot;</span><span class="w">   </span><span class="m">8</span><span class="w"> </span>seconds<span class="w"> </span>ago<span class="w">       </span>Up<span class="w"> </span><span class="m">7</span><span class="w"> </span>seconds<span class="w">        </span><span class="m">0</span>.0.0.0:9000-&gt;9000/tcp<span class="w">   </span>test_s3system_1
24274eba0d34<span class="w">        </span>chromedp/headless-shell:latest<span class="w">   </span><span class="s2">&quot;/headless-shell/hea…&quot;</span><span class="w">   </span><span class="m">8</span><span class="w"> </span>seconds<span class="w"> </span>ago<span class="w">       </span>Up<span class="w"> </span><span class="m">7</span><span class="w"> </span>seconds<span class="w">        </span><span class="m">0</span>.0.0.0:9222-&gt;9222/tcp<span class="w">   </span>test_headless_1
</pre></div>
</div>
</section>
<section id="edit-gleaner-config-file">
<h4>Edit Gleaner config file<a class="headerlink" href="#edit-gleaner-config-file" title="Link to this heading">#</a></h4>
<p>We have all the files we need and we have our support services running.  The next and
final step is to edit our Gleaner configuration file.  This will let Gleaner know
the location of the support services, the JSON-LD context file and the locations
of the resources we wish to index.</p>
<p>Let’s take a look at the full configuration file first and then break down each section.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="o">---</span>
<span class="linenos"> 2</span><span class="n">minio</span><span class="p">:</span>
<span class="linenos"> 3</span>  <span class="n">address</span><span class="p">:</span> <span class="mf">0.0.0.0</span>
<span class="linenos"> 4</span>  <span class="n">port</span><span class="p">:</span> <span class="mi">9000</span>
<span class="linenos"> 5</span>  <span class="n">accessKey</span><span class="p">:</span> <span class="n">worldsbestaccesskey</span>      
<span class="linenos"> 6</span>  <span class="n">secretKey</span><span class="p">:</span> <span class="n">worldsbestsecretkey</span>  
<span class="linenos"> 7</span>  <span class="n">ssl</span><span class="p">:</span> <span class="n">false</span>
<span class="linenos"> 8</span>  <span class="n">bucket</span><span class="p">:</span> <span class="n">gleaner</span>
<span class="linenos"> 9</span><span class="n">gleaner</span><span class="p">:</span>
<span class="linenos">10</span>  <span class="n">runid</span><span class="p">:</span> <span class="n">oih</span> <span class="c1"># this will be the bucket the output is placed in...</span>
<span class="linenos">11</span>  <span class="n">summon</span><span class="p">:</span> <span class="n">true</span> <span class="c1"># do we want to visit the web sites and pull down the files</span>
<span class="linenos">12</span>  <span class="n">mill</span><span class="p">:</span> <span class="n">true</span>
<span class="linenos">13</span><span class="n">context</span><span class="p">:</span>
<span class="linenos">14</span>  <span class="n">cache</span><span class="p">:</span> <span class="n">true</span>
<span class="linenos">15</span><span class="n">contextmaps</span><span class="p">:</span>
<span class="linenos">16</span><span class="o">-</span> <span class="n">prefix</span><span class="p">:</span> <span class="s2">&quot;https://schema.org/&quot;</span>
<span class="linenos">17</span>  <span class="n">file</span><span class="p">:</span> <span class="s2">&quot;./jsonldcontext.json&quot;</span>  <span class="c1"># wget http://schema.org/docs/jsonldcontext.jsonld</span>
<span class="linenos">18</span><span class="o">-</span> <span class="n">prefix</span><span class="p">:</span> <span class="s2">&quot;http://schema.org/&quot;</span>
<span class="linenos">19</span>  <span class="n">file</span><span class="p">:</span> <span class="s2">&quot;./jsonldcontext.json&quot;</span>  <span class="c1"># wget http://schema.org/docs/jsonldcontext.jsonld</span>
<span class="linenos">20</span><span class="n">summoner</span><span class="p">:</span>
<span class="linenos">21</span>  <span class="n">after</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>      <span class="c1"># &quot;21 May 20 10:00 UTC&quot;   </span>
<span class="linenos">22</span>  <span class="n">mode</span><span class="p">:</span> <span class="n">full</span>  <span class="c1"># full || diff:  If diff compare what we have currently in gleaner to sitemap, get only new, delete missing</span>
<span class="linenos">23</span>  <span class="n">threads</span><span class="p">:</span> <span class="mi">1</span>
<span class="linenos">24</span>  <span class="n">delay</span><span class="p">:</span> <span class="mi">0</span>  <span class="c1"># milliseconds (1000 = 1 second) to delay between calls (will FORCE threads to 1) </span>
<span class="linenos">25</span>  <span class="n">headless</span><span class="p">:</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">9222</span>  <span class="c1"># URL for headless see docs/headless</span>
<span class="linenos">26</span><span class="n">millers</span><span class="p">:</span>
<span class="linenos">27</span>  <span class="n">graph</span><span class="p">:</span> <span class="n">true</span>
<span class="linenos">28</span>  <span class="c1">#geojson: false</span>
<span class="linenos">29</span><span class="n">sitegraphs</span><span class="p">:</span>
<span class="linenos">30</span><span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">aquadocs</span>
<span class="linenos">31</span>  <span class="n">url</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">oih</span><span class="o">.</span><span class="n">aquadocs</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">aquadocs</span><span class="o">.</span><span class="n">json</span> 
<span class="linenos">32</span>  <span class="n">headless</span><span class="p">:</span> <span class="n">false</span>
<span class="linenos">33</span>  <span class="n">pid</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">re3data</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">repository</span><span class="o">/</span><span class="n">aquadocs</span>
<span class="linenos">34</span>  <span class="n">properName</span><span class="p">:</span> <span class="n">AquaDocs</span>
<span class="linenos">35</span>  <span class="n">domain</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">aquadocs</span><span class="o">.</span><span class="n">org</span> 
<span class="linenos">36</span><span class="n">sources</span><span class="p">:</span>
<span class="linenos">37</span><span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">samplesearth</span>
<span class="linenos">38</span>  <span class="n">url</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">samples</span><span class="o">.</span><span class="n">earth</span><span class="o">/</span><span class="n">sitemap</span><span class="o">.</span><span class="n">xml</span>
<span class="linenos">39</span>  <span class="n">headless</span><span class="p">:</span> <span class="n">false</span>
<span class="linenos">40</span>  <span class="n">pid</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">re3data</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">repository</span><span class="o">/</span><span class="n">samplesearth</span>
<span class="linenos">41</span>  <span class="n">properName</span><span class="p">:</span> <span class="n">Samples</span> <span class="n">Earth</span> <span class="p">(</span><span class="n">DEMO</span> <span class="n">Site</span><span class="p">)</span>
<span class="linenos">42</span>  <span class="n">domain</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">samples</span><span class="o">.</span><span class="n">earth</span>  
<span class="linenos">43</span><span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">marinetraining</span>
<span class="linenos">44</span>  <span class="n">url</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">marinetraining</span><span class="o">.</span><span class="n">eu</span><span class="o">/</span><span class="n">sitemap</span><span class="o">.</span><span class="n">xml</span>
<span class="linenos">45</span>  <span class="n">headless</span><span class="p">:</span> <span class="n">false</span>
<span class="linenos">46</span>  <span class="n">pid</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">re3data</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">repository</span><span class="o">/</span><span class="n">marinetraining</span>
<span class="linenos">47</span>  <span class="n">properName</span><span class="p">:</span> <span class="n">Marine</span> <span class="n">Training</span> <span class="n">EU</span>
<span class="linenos">48</span>  <span class="n">domain</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">marinetraining</span><span class="o">.</span><span class="n">eu</span><span class="o">/</span>
<span class="linenos">49</span><span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">marineie</span>
<span class="linenos">50</span>  <span class="n">url</span><span class="p">:</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">data</span><span class="o">.</span><span class="n">marine</span><span class="o">.</span><span class="n">ie</span><span class="o">/</span><span class="n">geonetwork</span><span class="o">/</span><span class="n">srv</span><span class="o">/</span><span class="n">eng</span><span class="o">/</span><span class="n">portal</span><span class="o">.</span><span class="n">sitemap</span>
<span class="linenos">51</span>  <span class="n">headless</span><span class="p">:</span> <span class="n">true</span>
<span class="linenos">52</span>  <span class="n">pid</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">re3data</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">repository</span><span class="o">/</span><span class="n">marineie</span>
<span class="linenos">53</span>  <span class="n">properName</span><span class="p">:</span> <span class="n">Marine</span> <span class="n">Institute</span> <span class="n">Data</span> <span class="n">Catalogue</span>
<span class="linenos">54</span>  <span class="n">domain</span><span class="p">:</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">data</span><span class="o">.</span><span class="n">marine</span><span class="o">.</span><span class="n">ie</span>
<span class="linenos">55</span><span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">oceanexperts</span>
<span class="linenos">56</span>  <span class="n">url</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">oceanexpert</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">assets</span><span class="o">/</span><span class="n">sitemaps</span><span class="o">/</span><span class="n">sitemapTraining</span><span class="o">.</span><span class="n">xml</span>
<span class="linenos">57</span>  <span class="n">headless</span><span class="p">:</span> <span class="n">false</span>
<span class="linenos">58</span>  <span class="n">pid</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">re3data</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">repository</span><span class="o">/</span><span class="n">oceanexpert</span>
<span class="linenos">59</span>  <span class="n">properName</span><span class="p">:</span> <span class="n">OceanExpert</span> <span class="n">UNESCO</span><span class="o">/</span><span class="n">IOC</span> <span class="n">Project</span> <span class="n">Office</span> <span class="k">for</span> <span class="n">IODE</span> 
<span class="linenos">60</span>  <span class="n">domain</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">oceanexpert</span><span class="o">.</span><span class="n">org</span><span class="o">/</span>
<span class="linenos">61</span><span class="c1"># - name: obis</span>
<span class="linenos">62</span><span class="c1">#   url: https://obis.org/sitemap/sitemap_datasets.xml</span>
<span class="linenos">63</span><span class="c1">#   headless: false</span>
<span class="linenos">64</span><span class="c1">#   pid: https://www.re3data.org/repository/obis</span>
<span class="linenos">65</span><span class="c1">#   properName: Ocean Biodiversity Information System</span>
<span class="linenos">66</span><span class="c1">#   domain: https://obis.org  </span>
</pre></div>
</div>
<section id="object-store">
<h5>Object store<a class="headerlink" href="#object-store" title="Link to this heading">#</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">minio</span><span class="p">:</span>
<span class="linenos">2</span>  <span class="n">address</span><span class="p">:</span> <span class="mf">0.0.0.0</span>
<span class="linenos">3</span>  <span class="n">port</span><span class="p">:</span> <span class="mi">9000</span>
<span class="linenos">4</span>  <span class="n">accessKey</span><span class="p">:</span> <span class="n">worldsbestaccesskey</span>      
<span class="linenos">5</span>  <span class="n">secretKey</span><span class="p">:</span> <span class="n">worldsbestsecretkey</span>  
<span class="linenos">6</span>  <span class="n">ssl</span><span class="p">:</span> <span class="n">false</span>
<span class="linenos">7</span>  <span class="n">bucket</span><span class="p">:</span> <span class="n">gleaner</span>
</pre></div>
</div>
<p>The minio section defines the IP and port of the object store.  For this case, we are
using minio and these are the IP and port from our docker compose steps above.  Note,
if you were to use Ceph or AWS S3, this section is still labeled minio.  You simply
need to update the property values.</p>
</section>
<section id="gleaner">
<h5>Gleaner<a class="headerlink" href="#gleaner" title="Link to this heading">#</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">gleaner</span><span class="p">:</span>
<span class="linenos">2</span>  <span class="n">runid</span><span class="p">:</span> <span class="n">oih</span> <span class="c1"># this will be the bucket the output is placed in...</span>
<span class="linenos">3</span>  <span class="n">summon</span><span class="p">:</span> <span class="n">true</span> <span class="c1"># do we want to visit the web sites and pull down the files</span>
<span class="linenos">4</span>  <span class="n">mill</span><span class="p">:</span> <span class="n">true</span>
</pre></div>
</div>
<p>This passes a few high level concpets.</p>
<ul class="simple">
<li><p>runid:</p></li>
<li><p>summon</p></li>
<li><p>mill</p></li>
</ul>
</section>
<section id="context-sections">
<h5>Context sections<a class="headerlink" href="#context-sections" title="Link to this heading">#</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">context</span><span class="p">:</span>
<span class="linenos">2</span>  <span class="n">cache</span><span class="p">:</span> <span class="n">true</span>
<span class="linenos">3</span><span class="n">contextmaps</span><span class="p">:</span>
<span class="linenos">4</span><span class="o">-</span> <span class="n">prefix</span><span class="p">:</span> <span class="s2">&quot;https://schema.org/&quot;</span>
<span class="linenos">5</span>  <span class="n">file</span><span class="p">:</span> <span class="s2">&quot;./jsonldcontext.json&quot;</span>  <span class="c1"># wget http://schema.org/docs/jsonldcontext.jsonld</span>
<span class="linenos">6</span><span class="o">-</span> <span class="n">prefix</span><span class="p">:</span> <span class="s2">&quot;http://schema.org/&quot;</span>
<span class="linenos">7</span>  <span class="n">file</span><span class="p">:</span> <span class="s2">&quot;./jsonldcontext.json&quot;</span>  <span class="c1"># wget http://schema.org/docs/jsonldcontext.jsonld</span>
</pre></div>
</div>
<p>Comments for the context sections</p>
</section>
<section id="summoner-section">
<h5>Summoner section<a class="headerlink" href="#summoner-section" title="Link to this heading">#</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">summoner</span><span class="p">:</span>
<span class="linenos">2</span>  <span class="n">after</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>      <span class="c1"># &quot;21 May 20 10:00 UTC&quot;   </span>
<span class="linenos">3</span>  <span class="n">mode</span><span class="p">:</span> <span class="n">full</span>  <span class="c1"># full || diff:  If diff compare what we have currently in gleaner to sitemap, get only new, delete missing</span>
<span class="linenos">4</span>  <span class="n">threads</span><span class="p">:</span> <span class="mi">1</span>
<span class="linenos">5</span>  <span class="n">delay</span><span class="p">:</span> <span class="mi">0</span>  <span class="c1"># milliseconds (1000 = 1 second) to delay between calls (will FORCE threads to 1) </span>
<span class="linenos">6</span>  <span class="n">headless</span><span class="p">:</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">9222</span>  <span class="c1"># URL for headless see docs/headless</span>
</pre></div>
</div>
<p>Comments for the summoner sections</p>
</section>
<section id="millers-section">
<h5>Millers section<a class="headerlink" href="#millers-section" title="Link to this heading">#</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">millers</span><span class="p">:</span>
<span class="linenos">2</span>  <span class="n">graph</span><span class="p">:</span> <span class="n">true</span>
<span class="linenos">3</span>  <span class="c1">#geojson: false</span>
</pre></div>
</div>
<p>Comments for the miller sections</p>
</section>
<section id="site-graphs-section">
<h5>Site graphs section<a class="headerlink" href="#site-graphs-section" title="Link to this heading">#</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">sitegraphs</span><span class="p">:</span>
<span class="linenos">2</span><span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">aquadocs</span>
<span class="linenos">3</span>  <span class="n">url</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">oih</span><span class="o">.</span><span class="n">aquadocs</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">aquadocs</span><span class="o">.</span><span class="n">json</span> 
<span class="linenos">4</span>  <span class="n">headless</span><span class="p">:</span> <span class="n">false</span>
<span class="linenos">5</span>  <span class="n">pid</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">re3data</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">repository</span><span class="o">/</span><span class="n">aquadocs</span>
<span class="linenos">6</span>  <span class="n">properName</span><span class="p">:</span> <span class="n">AquaDocs</span>
<span class="linenos">7</span>  <span class="n">domain</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">aquadocs</span><span class="o">.</span><span class="n">org</span> 
</pre></div>
</div>
<p>Comments for the sitegrpah sections</p>
</section>
<section id="sources-section">
<h5>Sources section<a class="headerlink" href="#sources-section" title="Link to this heading">#</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">sources</span><span class="p">:</span>
<span class="linenos"> 2</span><span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">samplesearth</span>
<span class="linenos"> 3</span>  <span class="n">url</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">samples</span><span class="o">.</span><span class="n">earth</span><span class="o">/</span><span class="n">sitemap</span><span class="o">.</span><span class="n">xml</span>
<span class="linenos"> 4</span>  <span class="n">headless</span><span class="p">:</span> <span class="n">false</span>
<span class="linenos"> 5</span>  <span class="n">pid</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">re3data</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">repository</span><span class="o">/</span><span class="n">samplesearth</span>
<span class="linenos"> 6</span>  <span class="n">properName</span><span class="p">:</span> <span class="n">Samples</span> <span class="n">Earth</span> <span class="p">(</span><span class="n">DEMO</span> <span class="n">Site</span><span class="p">)</span>
<span class="linenos"> 7</span>  <span class="n">domain</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">samples</span><span class="o">.</span><span class="n">earth</span>  
<span class="linenos"> 8</span><span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">marinetraining</span>
<span class="linenos"> 9</span>  <span class="n">url</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">marinetraining</span><span class="o">.</span><span class="n">eu</span><span class="o">/</span><span class="n">sitemap</span><span class="o">.</span><span class="n">xml</span>
<span class="linenos">10</span>  <span class="n">headless</span><span class="p">:</span> <span class="n">false</span>
<span class="linenos">11</span>  <span class="n">pid</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">re3data</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">repository</span><span class="o">/</span><span class="n">marinetraining</span>
<span class="linenos">12</span>  <span class="n">properName</span><span class="p">:</span> <span class="n">Marine</span> <span class="n">Training</span> <span class="n">EU</span>
<span class="linenos">13</span>  <span class="n">domain</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">marinetraining</span><span class="o">.</span><span class="n">eu</span><span class="o">/</span>
<span class="linenos">14</span><span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">marineie</span>
<span class="linenos">15</span>  <span class="n">url</span><span class="p">:</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">data</span><span class="o">.</span><span class="n">marine</span><span class="o">.</span><span class="n">ie</span><span class="o">/</span><span class="n">geonetwork</span><span class="o">/</span><span class="n">srv</span><span class="o">/</span><span class="n">eng</span><span class="o">/</span><span class="n">portal</span><span class="o">.</span><span class="n">sitemap</span>
<span class="linenos">16</span>  <span class="n">headless</span><span class="p">:</span> <span class="n">true</span>
<span class="linenos">17</span>  <span class="n">pid</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">re3data</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">repository</span><span class="o">/</span><span class="n">marineie</span>
<span class="linenos">18</span>  <span class="n">properName</span><span class="p">:</span> <span class="n">Marine</span> <span class="n">Institute</span> <span class="n">Data</span> <span class="n">Catalogue</span>
<span class="linenos">19</span>  <span class="n">domain</span><span class="p">:</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">data</span><span class="o">.</span><span class="n">marine</span><span class="o">.</span><span class="n">ie</span>
<span class="linenos">20</span><span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">oceanexperts</span>
<span class="linenos">21</span>  <span class="n">url</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">oceanexpert</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">assets</span><span class="o">/</span><span class="n">sitemaps</span><span class="o">/</span><span class="n">sitemapTraining</span><span class="o">.</span><span class="n">xml</span>
<span class="linenos">22</span>  <span class="n">headless</span><span class="p">:</span> <span class="n">false</span>
<span class="linenos">23</span>  <span class="n">pid</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">re3data</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">repository</span><span class="o">/</span><span class="n">oceanexpert</span>
<span class="linenos">24</span>  <span class="n">properName</span><span class="p">:</span> <span class="n">OceanExpert</span> <span class="n">UNESCO</span><span class="o">/</span><span class="n">IOC</span> <span class="n">Project</span> <span class="n">Office</span> <span class="k">for</span> <span class="n">IODE</span> 
<span class="linenos">25</span>  <span class="n">domain</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">oceanexpert</span><span class="o">.</span><span class="n">org</span><span class="o">/</span>
<span class="linenos">26</span><span class="c1"># - name: obis</span>
<span class="linenos">27</span><span class="c1">#   url: https://obis.org/sitemap/sitemap_datasets.xml</span>
<span class="linenos">28</span><span class="c1">#   headless: false</span>
<span class="linenos">29</span><span class="c1">#   pid: https://www.re3data.org/repository/obis</span>
<span class="linenos">30</span><span class="c1">#   properName: Ocean Biodiversity Information System</span>
<span class="linenos">31</span><span class="c1">#   domain: https://obis.org  </span>
</pre></div>
</div>
<p>Comments for the sources sections</p>
</section>
</section>
<section id="run-gleaner">
<h4>Run gleaner<a class="headerlink" href="#run-gleaner" title="Link to this heading">#</a></h4>
<p>For this example we are going to run Gleaner directly.  In a deployed instance you may
run Gleaner via a script or cron style service.  We will document that elsewhere.</p>
<p>We can do a quick test of the setup.</p>
<div class="tip admonition">
<p class="admonition-title">Command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>./gleaner<span class="w"> </span>-cfg<span class="w"> </span>template_v2.0<span class="w"> </span>-setup
</pre></div>
</div>
</div>
<p>For now, we are ready to run Gleaner.  Try:</p>
<div class="tip admonition">
<p class="admonition-title">Command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>./gleaner<span class="w"> </span>-cfg<span class="w"> </span>template_v2.0
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Leave the suffix like .yaml off the name of the config file.  The config system can also read
json and other formats.  So simply leave the suffix off and let the config code inspect the
contents.</p>
</div>
</section>
</section>
<section id="load-results-to-a-graph-and-test">
<h3>Load results to a graph and test<a class="headerlink" href="#load-results-to-a-graph-and-test" title="Link to this heading">#</a></h3>
<p>You have set up the server environment and Gleaner and done your run.  Things look good
but you don’t have a graph you can work with yet.    You need to load the JSON-LD into
the triplestore in order to start playing.</p>
<section id="minio-object-store">
<h4>Minio Object store<a class="headerlink" href="#minio-object-store" title="Link to this heading">#</a></h4>
<p>To view the object store you could use your browser and point it on the default minio
port at 9000.  This typically something like localhost:9000.</p>
<p>If you wish to continue to use the command line you can use the Minio client at
<a class="reference external" href="https://docs.min.io/docs/minio-client-quickstart-guide.html">Minio Client Quickstart guide</a>.</p>
<p>Once you have it installed and working, you can write an entry for our object store with:</p>
<div class="tip admonition">
<p class="admonition-title">Command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>./mc<span class="w"> </span><span class="nb">alias</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>minio<span class="w"> </span>http://0.0.0.0:9000<span class="w"> </span>worldsbestaccesskey<span class="w"> </span>worldsbestsecretkey
</pre></div>
</div>
</div>
</section>
<section id="load-triplestore">
<h4>Load Triplestore<a class="headerlink" href="#load-triplestore" title="Link to this heading">#</a></h4>
<p>We now want to load these objects, which are JSON-LD files holding RDF based graph
data, into a graph database.  We use the term, triplestore, to define a graph database
designed to work with the RDF data model and provide SPARQL query support over that
graph data.</p>
<ul class="simple">
<li><p>Simple script loading</p></li>
<li><p>Nabu</p></li>
<li><p>Try out a simple SPARQL query</p></li>
</ul>
</section>
</section>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading">#</a></h2>
<p>The following are some reference which may provide more information on the various
technologies used in this approach.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://developers.google.com/search/docs/advanced/structured-data/intro-structured-data">Google: Understanding how structured data works</a></p></li>
<li><p><a class="reference external" href="https://arxiv.org/abs/2006.06894">Google Dataset Search By the Numbers</a></p></li>
<li><p><a class="reference external" href="https://research.google/pubs/pub47845/">Google Dataset Search: Building a search engine for datasets in an open Web ecosystem</a></p></li>
<li><p><a class="reference external" href="https://www.w3.org/TR/sparql11-query/">W3C SPARQL</a></p></li>
<li><p><a class="reference external" href="https://www.w3.org/TR/shacl/">SHACL</a></p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Triplestore">Triplestores</a></p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./indexing"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Aggregator</p>
      </div>
    </a>
    <a class="right-next"
       href="cliDocker/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Gleaner CLI Docker</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gleaner-app">Gleaner (app)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#quick-start-steps">Quick Start steps</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#grab-gleaner-and-the-support-files-we-need">Grab Gleaner and the support files we need</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#about-the-compose-file-s">About the compose file(s)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#edit-environment-variables-setup-script">Edit environment variables setup script</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#spin-up-the-containers">Spin up the containers</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#edit-gleaner-config-file">Edit Gleaner config file</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#object-store">Object store</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#gleaner">Gleaner</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#context-sections">Context sections</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#summoner-section">Summoner section</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#millers-section">Millers section</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#site-graphs-section">Site graphs section</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#sources-section">Sources section</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#run-gleaner">Run gleaner</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#load-results-to-a-graph-and-test">Load results to a graph and test</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#minio-object-store">Minio Object store</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#load-triplestore">Load Triplestore</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Ocean InfoHub Project
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>